
@*
    Default Scripts Component
*@

@* <script src="vendors/popperjs/popper.min.js"></script>
<script src="vendors/bootstrap/bootstrap.min.js"></script> *@
<script src="vendors/is/is.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
<script src="vendors/fontawesome/all.min.js"></script>
<script src="assets/js/theme.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&amp;family=Volkhov:wght@700&amp;display=swap" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    $(document).ready(function () {
        $("#aiForm").on("submit", function (e) {
            e.preventDefault();

            var city = $("input[name='city']").val();
            var country = $("input[name='country']").val();

            $("#submitBtn").prop("disabled", true).text("Yükleniyor...");
            $("#placesResult").html("");
            $("#loadingSpinner").removeClass("d-none");
            $("#placesModal").modal("show");

            $.post("/AI/GetPlaces", { city: city, country: country })
                .done(function (res) {
                    $("#submitBtn").prop("disabled", false).text("Oluştur");
                    $("#loadingSpinner").addClass("d-none"); // spinner gizle

                    if (res.success) {
                        let places = res.data.split(/\d+\./).filter(p => p.trim() !== "");
                        let html = `<div class="row g-3">`;
                        places.forEach((place, index) => {
                            html += `
                                <div class="col-md-6">
                                    <div class="card shadow-sm h-100">
                                        <div class="card-body">
                                            <h5 class="card-title">#${index + 1}</h5>
                                            <p class="card-text">${place.trim()}</p>
                                        </div>
                                    </div>
                                </div>`;
                        });
                        html += `</div>`;
                        $("#placesResult").html(html);
                    } else {
                        $("#placesResult").html(`<p class="text-danger">${res.data}</p>`);
                    }
                })
                .fail(function () {
                    $("#submitBtn").prop("disabled", false).text("Oluştur");
                    $("#loadingSpinner").addClass("d-none");
                    $("#placesResult").html(`<p class="text-danger">Bir hata oluştu, lütfen tekrar deneyin.</p>`);
                });
        });
    });
</script>
